---
import { translations, type Locale } from '../i18n/translations';
import GalicianFlag from './GalicianFlag.astro';

interface Props {
  locale: Locale;
}

const { locale } = Astro.props;
const t = translations[locale];

const locales = [
  { code: 'gl', name: 'GL', flag: 'galician' },
  { code: 'es', name: 'ES', flag: 'üá™üá∏' },
  { code: 'en', name: 'EN', flag: 'üá¨üáß' },
  { code: 'pt', name: 'PT', flag: 'üáµüáπ' }
];

const getLocalePath = (targetLocale: string) => {
  const base = import.meta.env.BASE_URL;
  const separator = base === '/' ? '' : '/';
  if (targetLocale === 'gl') {
    return base === '/' ? base : `${base}/`;
  }
  return `${base}${separator}${targetLocale}`;
};
---

<header class="sticky top-0 z-50 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-700 shadow-sm">
  <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <a href={getLocalePath(locale)} class="text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent hover:from-blue-700 hover:to-indigo-700 transition-all">
        Marcelo Fort Mu√±oz
      </a>
      
      <div class="hidden md:flex items-center space-x-8">
        <a href={`${getLocalePath(locale)}#about`} class="text-slate-700 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors font-medium">
          {t.nav.about}
        </a>
        <a href={`${getLocalePath(locale)}#skills`} class="text-slate-700 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors font-medium">
          {t.nav.skills}
        </a>
        <a href={`${getLocalePath(locale)}#languages`} class="text-slate-700 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors font-medium">
          {t.nav.languages}
        </a>
        <a href={`${getLocalePath(locale)}#projects`} class="text-slate-700 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors font-medium">
          {t.nav.projects}
        </a>
        <a href={`${getLocalePath(locale)}#contact`} class="text-slate-700 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors font-medium">
          {t.nav.contact}
        </a>
      </div>
      
      <div class="flex items-center space-x-2">
        {locales.map((loc) => (
          <a
            href={getLocalePath(loc.code)}
            class={`px-2 py-1 rounded-md text-sm font-medium transition-all flex items-center ${
              locale === loc.code
                ? 'bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300'
                : 'text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800'
            }`}
            aria-label={`Switch to ${loc.name}`}
          >
            {loc.flag === 'galician' ? (
              <GalicianFlag size={16} class="mr-1" />
            ) : (
              <span class="mr-1">{loc.flag}</span>
            )}
            <span class="hidden sm:inline">{loc.name}</span>
          </a>
        ))}
      </div>
    </div>
  </nav>
</header>

